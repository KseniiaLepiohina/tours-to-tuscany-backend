{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"./apiSlices\";\nimport axios from 'axios';\nconst USERS_URL = '/users';\nexport const signUpUser = createAsyncThunk(\"/signup\", async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${USERS_URL}/signup`, userData);\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message);\n  }\n});\nexport const logInUser = createAsyncThunk(\"/logIn\", async (credentials, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${USERS_URL}/login`, credentials);\n    return response.data; // Успішна відповідь\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message); // Обробка помилки\n  }\n});\nexport const resetPassword = createAsyncThunk(\"auth/resetPassword\", async ({\n  token,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${USERS_URL}/resetPassword/${token}`, {\n      password\n    });\n    return response.data; // Успішна відповідь\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || error.message); // Обробка помилки\n  }\n});\n\n//auth slice\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    existsUser: false,\n    userInfo: null,\n    loading: false,\n    error: null\n  },\n  reducers: {\n    setCredentials: (state, action) => {\n      state.existsUser = true;\n      state.userInfo = action.payload;\n    },\n    //User  initialisation\n    signUp: state => {\n      const user = localStorage.getItem('user');\n      if (user) {\n        state.existsUser = true;\n        state.userInfo = JSON.parse(user);\n        state.loading = false;\n        state.error = null;\n      }\n    },\n    //User log in\n    logIn: state => {\n      state.existsUser = true;\n      state.userInfo = localStorage.setItem('user', JSON.stringify());\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Обробка реєстрації\n    .addCase(signUpUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(signUpUser.fulfilled, (state, action) => {\n      state.loading = false;\n      state.existsUser = true;\n      state.userInfo = action.payload;\n    }).addCase(signUpUser.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Обробка логіна\n    .addCase(logInUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(logInUser.fulfilled, (state, action) => {\n      state.loading = false;\n      state.existsUser = true;\n      state.userInfo = action.payload;\n    }).addCase(logInUser.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Обробка відновлення пароля\n    .addCase(resetPassword.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(resetPassword.fulfilled, state => {\n      state.loading = false;\n    }).addCase(resetPassword.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","USERS_URL","signUpUser","userData","rejectWithValue","response","post","data","error","_error$response","_error$response$data","message","logInUser","credentials","_error$response2","_error$response2$data","resetPassword","token","password","_error$response3","_error$response3$data","authSlice","name","initialState","existsUser","userInfo","loading","reducers","setCredentials","state","action","payload","signUp","user","localStorage","getItem","JSON","parse","logIn","setItem","stringify","extraReducers","builder","addCase","pending","fulfilled","rejected"],"sources":["C:/Users/Kseniia/travel_site/frontend/src/slices/authSlice.js"],"sourcesContent":["import { createSlice,createAsyncThunk } from \"./apiSlices\";\r\nimport axios from 'axios'\r\nconst USERS_URL = '/users';\r\n\r\nexport const signUpUser = createAsyncThunk(\r\n    \"/signup\",\r\n    async(userData,{rejectWithValue}) => {\r\n        try{\r\n            const response = await axios.post(`${USERS_URL}/signup`,userData);\r\n            return response.data;\r\n        } catch(error) {\r\n            return rejectWithValue(error.response?.data?.message || error.message);\r\n        }\r\n    }\r\n\r\n)\r\nexport const logInUser = createAsyncThunk(\r\n    \"/logIn\",\r\n    async (credentials, { rejectWithValue }) => {\r\n      try {\r\n        const response = await axios.post(`${USERS_URL}/login`, credentials);\r\n        return response.data; // Успішна відповідь\r\n      } catch (error) {\r\n        return rejectWithValue(error.response?.data?.message || error.message); // Обробка помилки\r\n      }\r\n    }\r\n  );\r\n  \r\n  export const resetPassword = createAsyncThunk(\r\n    \"auth/resetPassword\",\r\n    async ({ token, password }, { rejectWithValue }) => {\r\n      try {\r\n        const response = await axios.post(`${USERS_URL}/resetPassword/${token}`, {\r\n          password,\r\n        });\r\n        return response.data; // Успішна відповідь\r\n      } catch (error) {\r\n        return rejectWithValue(error.response?.data?.message || error.message); // Обробка помилки\r\n      }\r\n    }\r\n  );\r\n  \r\n//auth slice\r\nexport const authSlice = createSlice({\r\n    name:\"auth\",\r\n    initialState:{\r\n        existsUser:false,\r\n        userInfo:null,\r\n        loading:false,\r\n        error:null,\r\n    },\r\n    reducers:{\r\n        setCredentials:(state,action) => {\r\n            state.existsUser = true;\r\n            state.userInfo = action.payload;\r\n        },\r\n        //User  initialisation\r\n        signUp :(state) => {\r\n            const user = localStorage.getItem('user');\r\n            if(user) {\r\n                state.existsUser = true;\r\n                state.userInfo= JSON.parse(user);\r\n                state.loading= false;\r\n                state.error= null;\r\n            }\r\n        },\r\n        //User log in\r\n        logIn :(state) => {\r\n            state.existsUser = true;\r\n            state.userInfo = localStorage.setItem('user',JSON.stringify());\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n          // Обробка реєстрації\r\n          .addCase(signUpUser.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n          })\r\n          .addCase(signUpUser.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.existsUser = true;\r\n            state.userInfo = action.payload;\r\n          })\r\n          .addCase(signUpUser.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n          })\r\n          // Обробка логіна\r\n          .addCase(logInUser.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n          })\r\n          .addCase(logInUser.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.existsUser = true;\r\n            state.userInfo = action.payload;\r\n          })\r\n          .addCase(logInUser.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n          })\r\n          // Обробка відновлення пароля\r\n          .addCase(resetPassword.pending, (state) => {\r\n            state.loading = true;\r\n            state.error = null;\r\n          })\r\n          .addCase(resetPassword.fulfilled, (state) => {\r\n            state.loading = false;\r\n          })\r\n          .addCase(resetPassword.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.error = action.payload;\r\n          });\r\n      },\r\n    \r\n\r\n})\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}